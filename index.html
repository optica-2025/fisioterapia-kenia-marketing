<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketing Fisioterapia - Lic. Kenia de los Santos Andujar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #4f46e5 0%, #06b6d4 100%);
        }
        .touch-btn {
            transition: all 0.3s ease;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        .touch-btn:hover, .touch-btn:active {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .touch-btn:active {
            transform: translateY(0px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .selected {
            border: 3px solid #2563eb !important;
            background: #dbeafe !important;
            position: relative;
        }
        .selected::after {
            content: '‚úì';
            position: absolute;
            top: -8px;
            right: -8px;
            background: #2563eb;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        .simple-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 24px;
            margin: 16px 0;
        }
        .contact-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            text-decoration: none;
            display: block;
            text-align: center;
            margin: 12px 0;
            font-weight: bold;
            font-size: 18px;
        }
        .emergency-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            animation: subtle-pulse 3s infinite;
        }
        .referral-btn {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        @keyframes subtle-pulse {
            0%, 100% { box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3); }
            50% { box-shadow: 0 6px 20px rgba(239, 68, 68, 0.5); }
        }
        .anatomy-image {
            max-width: 100%;
            border-radius: 12px;
            margin: 15px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <!-- Header -->
        <div class="gradient-bg text-white py-8">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <h1 class="text-2xl font-bold mb-2">Sistema de Marketing Completo</h1>
                <h2 class="text-xl">Lic. Kenia de los Santos Andujar</h2>
                <p class="text-base opacity-90 mt-2">Crea mensajes y plantillas visuales para tus clientes</p>
            </div>
        </div>

        <div class="max-w-4xl mx-auto px-4 py-6">
            <!-- Opciones Principales -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-xl font-bold mb-6 text-center">¬øQu√© mensaje quieres crear?</h2>
              
                <div class="grid gap-4 mb-6">
                    <button onclick="selectMessageType('info')" id="type-info" class="touch-btn bg-blue-500 text-white p-6 rounded-xl text-left shadow-lg selected">
                        <div class="flex items-center">
                            <i class="fas fa-info-circle text-2xl mr-4"></i>
                            <div>
                                <h3 class="text-lg font-bold">Informaci√≥n de Servicios</h3>
                                <p class="text-sm opacity-90">Explica qu√© tratamientos ofreces</p>
                            </div>
                        </div>
                    </button>
                  
                    <button onclick="selectMessageType('offer')" id="type-offer" class="touch-btn bg-purple-500 text-white p-6 rounded-xl text-left shadow-lg">
                        <div class="flex items-center">
                            <i class="fas fa-gift text-2xl mr-4"></i>
                            <div>
                                <h3 class="text-lg font-bold">Ofertas Especiales</h3>
                                <p class="text-sm opacity-90">Promociona descuentos y ofertas</p>
                            </div>
                        </div>
                    </button>

                    <button onclick="selectMessageType('card')" id="type-card" class="touch-btn bg-orange-500 text-white p-6 rounded-xl text-left shadow-lg">
                        <div class="flex items-center">
                            <i class="fas fa-id-card text-2xl mr-4"></i>
                            <div>
                                <h3 class="text-lg font-bold">Tarjeta de Presentaci√≥n</h3>
                                <p class="text-sm opacity-90">Para que clientes compartan tu info</p>
                            </div>
                        </div>
                    </button>

                    <button onclick="selectMessageType('testimonial')" id="type-testimonial" class="touch-btn bg-green-500 text-white p-6 rounded-xl text-left shadow-lg">
                        <div class="flex items-center">
                            <i class="fas fa-star text-2xl mr-4"></i>
                            <div>
                                <h3 class="text-lg font-bold">Historias de √âxito</h3>
                                <p class="text-sm opacity-90">Testimonios de pacientes</p>
                            </div>
                        </div>
                    </button>
                </div>

                <!-- Selector de Problema -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold mb-4">¬øDe qu√© problema quieres hablar?</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <button onclick="selectProblem('espalda')" id="prob-espalda" class="touch-btn p-4 border-2 border-blue-500 bg-blue-50 rounded-lg selected">
                            <div class="text-2xl mb-1">üèÉ‚Äç‚ôÇÔ∏è</div>
                            <div class="font-medium text-sm">Espalda</div>
                        </button>
                        <button onclick="selectProblem('cuello')" id="prob-cuello" class="touch-btn p-4 border-2 border-gray-200 rounded-lg">
                            <div class="text-2xl mb-1">üíÜ‚Äç‚ôÄÔ∏è</div>
                            <div class="font-medium text-sm">Cuello</div>
                        </button>
                        <button onclick="selectProblem('rodilla')" id="prob-rodilla" class="touch-btn p-4 border-2 border-gray-200 rounded-lg">
                            <div class="text-2xl mb-1">ü¶µ</div>
                            <div class="font-medium text-sm">Rodilla</div>
                        </button>
                        <button onclick="selectProblem('hombro')" id="prob-hombro" class="touch-btn p-4 border-2 border-gray-200 rounded-lg">
                            <div class="text-2xl mb-1">üí™</div>
                            <div class="font-medium text-sm">Hombro</div>
                        </button>
                        <button onclick="selectProblem('pies')" id="prob-pies" class="touch-btn p-4 border-2 border-gray-200 rounded-lg">
                            <div class="text-2xl mb-1">ü¶∂</div>
                            <div class="font-medium text-sm">Pies</div>
                        </button>
                        <button onclick="selectProblem('geriatrica')" id="prob-geriatrica" class="touch-btn p-4 border-2 border-gray-200 rounded-lg">
                            <div class="text-2xl mb-1">üëµ</div>
                            <div class="font-medium text-sm">Adultos Mayores</div>
                        </button>
                        <button onclick="selectProblem('deportiva')" id="prob-deportiva" class="touch-btn p-4 border-2 border-gray-200 rounded-lg">
                            <div class="text-2xl mb-1">‚öΩ</div>
                            <div class="font-medium text-sm">Deportistas</div>
                        </button>
                        <button onclick="selectProblem('general')" id="prob-general" class="touch-btn p-4 border-2 border-gray-200 rounded-lg">
                            <div class="text-2xl mb-1">üè•</div>
                            <div class="font-medium text-sm">General</div>
                        </button>
                    </div>
                </div>

                <div class="text-center">
                    <button onclick="generateMessage()" class="touch-btn bg-gradient-to-r from-green-500 to-blue-500 text-white py-4 px-8 rounded-xl font-bold text-lg shadow-lg">
                        <i class="fas fa-magic mr-2"></i>Crear Mensaje y Plantilla
                    </button>
                </div>
            </div>

            <!-- Mensaje y Plantilla Generados -->
            <div id="messageResult" class="hidden">
                <!-- Plantilla Visual -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4 text-center">üé® Plantilla Visual Generada</h3>
                    <div class="flex justify-center mb-4">
                        <canvas id="templateCanvas" class="border border-gray-300 rounded-lg shadow-lg" style="max-width: 100%; max-height: 500px;"></canvas>
                    </div>
                    <div class="text-center">
                        <button onclick="downloadTemplate()" class="touch-btn bg-purple-600 text-white py-3 px-6 rounded-xl font-bold shadow-lg">
                            <i class="fas fa-download mr-2"></i>Descargar Plantilla
                        </button>
                    </div>
                </div>

                <!-- Mensaje de Texto -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4 text-center">üì± Mensaje de Texto</h3>
                  
                    <div class="simple-card">
                        <div id="messageContent" class="text-sm leading-relaxed whitespace-pre-line"></div>
                       
                        <!-- Imagen de anatom√≠a relacionada -->
                        <div id="anatomyImageContainer" class="mt-4 text-center hidden">
                            <img id="anatomyImage" class="anatomy-image mx-auto" alt="Anatom√≠a relacionada">
                            <p class="text-xs text-gray-500 mt-1">Imagen de referencia anat√≥mica</p>
                        </div>
                      
                        <!-- Botones de Contacto (Vista Previa) -->
                        <div class="mt-6 pt-4 border-t-2 border-gray-100">
                            <p class="text-center text-sm text-gray-600 mb-4">üëÜ Tus clientes ver√°n estos botones:</p>
                            <div class="space-y-3">
                                <div class="emergency-btn contact-btn">
                                    üö® EMERGENCIA - Tengo mucho dolor
                                </div>
                                <div class="contact-btn">
                                    üìÖ Quiero agendar una cita
                                </div>
                                <div class="referral-btn contact-btn">
                                    üë• Recomendar a un familiar
                                </div>
                            </div>
                        </div>
                    </div>
                  
                    <!-- Acciones -->
                    <div class="grid gap-3 mt-6">
                        <button onclick="copyMessage()" class="touch-btn bg-green-600 text-white py-4 px-6 rounded-xl font-bold text-lg shadow-lg">
                            <i class="fas fa-copy mr-2"></i>Copiar Mensaje Completo
                        </button>
                        <button onclick="sendToWhatsApp()" class="touch-btn bg-blue-600 text-white py-4 px-6 rounded-xl font-bold text-lg shadow-lg">
                            <i class="fab fa-whatsapp mr-2"></i>Enviar por WhatsApp
                        </button>
                        <button onclick="generateAnother()" class="touch-btn bg-gray-600 text-white py-3 px-6 rounded-xl font-bold shadow-lg">
                            <i class="fas fa-refresh mr-2"></i>Generar Otra Variaci√≥n
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let messageType = 'info';
        let selectedProblem = 'espalda';
        let currentMessage = '';

        // Base de datos de im√°genes de anatom√≠a
        const anatomyImages = {
            espalda: 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            cuello: 'https://images.unsplash.com/photo-1542281286-9e0a16bb7366?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            rodilla: 'https://images.unsplash.com/photo-1504439468489-c8920d796a29?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            hombro: 'https://images.unsplash.com/photo-1519817914152-22d216bb9170?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            pies: 'https://images.unsplash.com/photo-1543946200-2c3f2aba2e5c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            geriatrica: 'https://images.unsplash.com/photo-1535448580089-c7f9490c78b1?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            deportiva: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            general: 'https://images.unsplash.com/photo-1516549655169-df83a0774514?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
        };

        // Base de datos de contenido con m√∫ltiples variaciones
        const contentDatabase = {
            espalda: {
                name: 'dolor de espalda',
                icon: 'üèÉ‚Äç‚ôÇÔ∏è',
                problems: [
                    'dolor lumbar cr√≥nico', 'contracturas de espalda', 'lumbago', 'ci√°tica',
                    'dolor al agacharse', 'rigidez matutina', 'dolor al estar sentado',
                    'dolor entre om√≥platos', 'hernia discal', 'escoliosis postural'
                ],
                treatments: [
                    'masajes terap√©uticos profundos', 'TENS para alivio inmediato', 'termoterapia localizada',
                    'liberaci√≥n miofascial', 'terapia manual vertebral', 'ejercicios de Williams',
                    'fortalecimiento del core', 'tracciones suaves', 'movilizaciones articulares'
                ]
            },
            cuello: {
                name: 'dolor de cuello',
                icon: 'üíÜ‚Äç‚ôÄÔ∏è',
                problems: [
                    'tort√≠colis aguda', 'rigidez cervical', 'dolor de cabeza tensional',
                    'mareos cervicales', 'contractura del trapecio', 's√≠ndrome cervical',
                    'dolor al girar la cabeza', 'cervicalgia cr√≥nica'
                ],
                treatments: [
                    'terapia manual cervical', 'TENS cervical especializado', 'liberaci√≥n de puntos gatillo',
                    'movilizaciones suaves', 'termoterapia localizada', 'ejercicios McKenzie',
                    'relajaci√≥n muscular progresiva', 'tracci√≥n manual'
                ]
            },
            rodilla: {
                name: 'dolor de rodilla',
                icon: 'ü¶µ',
                problems: [
                    'artritis de rodilla', 'rodilla hinchada', 'dolor al caminar',
                    'dificultad para subir escaleras', 'rigidez articular', 'condromalacia',
                    'meniscopat√≠a', 'bursitis rotuliana'
                ],
                treatments: [
                    'fortalecimiento del cu√°driceps', 'crioterapia post-ejercicio', 'TENS analg√©sico',
                    'drenaje linf√°tico manual', 'movilizaci√≥n patelar', 'ejercicios propioceptivos',
                    'termoterapia pre-ejercicio', 'vendaje funcional'
                ]
            },
            hombro: {
                name: 'dolor de hombro',
                icon: 'üí™',
                problems: [
                    'hombro congelado', 's√≠ndrome del manguito rotador', 'bursitis subacromial',
                    'tendinitis del b√≠ceps', 'capsulitis adhesiva', 'pinzamiento subacromial',
                    'dificultad para levantar el brazo', 'dolor nocturno'
                ],
                treatments: [
                    'p√©ndulos de Codman', 'movilizaciones capsulares', 'TENS para hombro',
                    'termoterapia h√∫meda', 'liberaci√≥n cicatricial', 'ejercicios de Kabat',
                    'fortalecimiento exc√©ntrico', 'crioterapia selectiva'
                ]
            },
            pies: {
                name: 'dolor de pies',
                icon: 'ü¶∂',
                problems: [
                    'fascitis plantar', 'espol√≥n calc√°neo', 'metatarsalgia',
                    'dolor en la planta del pie', 'hinchaz√≥n de pies', 'neuroma de Morton',
                    'pie plano', 'calambres nocturnos'
                ],
                treatments: [
                    'masoterapia plantar especializada', 'TENS para fascitis', 'crioterapia localizada',
                    'liberaci√≥n fascial profunda', 'ejercicios intr√≠nsecos', 'termoterapia de contraste',
                    'movilizaciones articulares', 'vendaje neuromuscular'
                ]
            },
            geriatrica: {
                name: 'problemas de adultos mayores',
                icon: 'üëµ',
                problems: [
                    'artritis generalizada', 'osteoporosis', 'p√©rdida de equilibrio',
                    'debilidad muscular', 'rigidez generalizada', 'dolor cr√≥nico',
                    'sarcopenia', 'fragilidad √≥sea'
                ],
                treatments: [
                    'ejercicios de equilibrio adaptados', 'fortalecimiento suave', 'movilidad articular',
                    'TENS geri√°trico', 'termoterapia adaptada', 'prevenci√≥n de ca√≠das',
                    'activaci√≥n muscular', 'marcha terap√©utica'
                ]
            },
            deportiva: {
                name: 'lesiones deportivas',
                icon: '‚öΩ',
                problems: [
                    'esguinces de tobillo', 'lesiones musculares', 'contracturas deportivas',
                    'sobrecargas musculares', 'tendinitis deportiva', 'lesiones por impacto',
                    'fatiga muscular', 'recuperaci√≥n atl√©tica'
                ],
                treatments: [
                    'crioterapia inmediata', 'TENS deportivo', 'masoterapia deportiva especializada',
                    'kinesiotaping funcional', 'ejercicios exc√©ntricos', 'recuperaci√≥n funcional',
                    'pliometr√≠a adaptada', 'liberaci√≥n activa'
                ]
            },
            general: {
                name: 'dolores musculares',
                icon: 'üè•',
                problems: [
                    'dolor muscular generalizado', 'tensi√≥n corporal', 'fatiga cr√≥nica',
                    'contracturas m√∫ltiples', 'fibromialgia', 'estr√©s f√≠sico',
                    'sobrecarga postural', 'dolor miofascial'
                ],
                treatments: [
                    'masoterapia integral', 'TENS generalizado', 'termoterapia completa',
                    'liberaci√≥n miofascial global', 'relajaci√≥n muscular', 'terapia manual',
                    'ejercicios de estiramiento', 't√©cnicas de relajaci√≥n'
                ]
            }
        };

        // Plantillas de mensajes con m√∫ltiples variaciones
        const messageTemplates = {
            info: [
                'üåü ¬øTienes {problem}?\n\nComo fisioterapeuta profesional te puedo ayudar con:\n‚Ä¢ {treatments}\n‚Ä¢ Servicio a domicilio\n‚Ä¢ Atenci√≥n personalizada\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658\n\n¬°No dejes que el dolor limite tu vida!',
              
                'üí™ ¬øSufres de {problem}?\n\nTengo la soluci√≥n profesional que necesitas:\n‚Ä¢ {treatments}\n‚Ä¢ Evaluaci√≥n completa incluida\n‚Ä¢ Horarios flexibles disponibles\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658\n\n¬°Recupera tu bienestar hoy mismo!',
              
                'üè• Tratamiento especializado para {problem}\n\nOfrecer soluciones efectivas:\n‚Ä¢ {treatments}\n‚Ä¢ T√©cnicas modernas comprobadas\n‚Ä¢ Atenci√≥n personalizada\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658\n\n¬°Tu salud no puede esperar!'
            ],
            offer: [
                'üéâ OFERTA ESPECIAL üéâ\n\n¬øSufres de {problem}?\n\nüí∞ ESTA SEMANA:\n‚úÖ Primera consulta 50% descuento\n‚úÖ Servicio a domicilio GRATIS\n‚úÖ Evaluaci√≥n completa incluida\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658\n\n‚è∞ Oferta por tiempo limitado',
              
                'üí∏ PROMOCI√ìN LIMITADA üí∏\n\nTratamiento para {problem}\n\nüéÅ INCLUYE:\n‚Ä¢ 3 sesiones por el precio de 2\n‚Ä¢ Evaluaci√≥n profesional gratis\n‚Ä¢ Plan de ejercicios personalizado\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658\n\nüî• Solo por esta semana',
              
                'üöÄ OFERTA EXCLUSIVA üöÄ\n\nPara pacientes con {problem}\n\n‚ú® BENEFICIOS:\n‚Ä¢ Primera sesi√≥n gratis\n‚Ä¢ Descuento en paquetes\n‚Ä¢ Asesor√≠a gratuita por WhatsApp\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658\n\nüéØ Aprovecha ahora'
            ],
            card: [
                'üëã ¬°Hola! Te comparto mi informaci√≥n de contacto:\n\nüë©‚Äç‚öïÔ∏è Lic. Kenia de los Santos Andujar\nüè• Fisioterapeuta Profesional\nüí™ Especialista en {problem}\n\nüì± WhatsApp: +1 (829) 697-4658\nüìç Servicio a domicilio disponible\n\n‚≠ê Atenci√≥n personalizada y de calidad',
              
                'üìá Tarjeta de Presentaci√≥n\n\nüë©‚Äç‚öïÔ∏è Lic. Kenia de los Santos Andujar\nüè• Fisioterapeuta Especializada\n\nüí™ Especialista en tratar {problem}\nüì± WhatsApp: +1 (829) 697-4658\nüìç Consultas a domicilio\n\nüåü Comparte con quien necesite ayuda',
              
                'ü©∫ Fisioterapia Profesional\n\nüë©‚Äç‚öïÔ∏è Lic. Kenia de los Santos Andujar\nüí™ Especialista en {problem}\n\nüì± Agenda tu cita: +1 (829) 697-4658\nüìç Servicio a domicilio\n\n‚ú® Resultados garantizados\n‚≠ê Comparte esta informaci√≥n'
            ],
            testimonial: [
                '‚≠ê HISTORIA DE √âXITO ‚≠ê\n\n"Despu√©s de sufrir de {problem} durante a√±os, la Lic. Kenia me ayud√≥ a recuperar mi movilidad en solo 5 sesiones. ¬°Incre√≠ble profesional!"\n\n- Mar√≠a R., paciente satisfecha\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658',
              
                '‚ú® TESTIMONIO REAL ‚ú®\n\n"Gracias a la Lic. Kenia por ayudarme con mi {problem}. Su tratamiento personalizado hizo que me recuperara m√°s r√°pido de lo esperado. ¬°100% recomendada!"\n\n- Carlos M., paciente agradecido\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658',
              
                'üèÜ RESULTADO COMPROBADO üèÜ\n\n"Llegu√© con mucho {problem} y en pocas semanas la Lic. Kenia me devolvi√≥ la calidad de vida. Su enfoque profesional y humano hace la diferencia."\n\n- Ana L., paciente recuperada\n\nüìû Lic. Kenia de los Santos Andujar\nüì± WhatsApp: +1 (829) 697-4658'
            ]
        };

        function selectMessageType(type) {
            messageType = type;
           
            // Remover selecci√≥n de todos los botones
            document.querySelectorAll('[id^="type-"]').forEach(btn => {
                btn.classList.remove('selected');
            });
           
            // Aplicar selecci√≥n al bot√≥n clickeado
            document.getElementById(`type-${type}`).classList.add('selected');
        }

        function selectProblem(problem) {
            selectedProblem = problem;
           
            // Remover selecci√≥n de todos los botones
            document.querySelectorAll('[id^="prob-"]').forEach(btn => {
                btn.classList.remove('selected');
                btn.classList.remove('border-blue-500', 'bg-blue-50');
                btn.classList.add('border-gray-200');
            });
           
            // Aplicar selecci√≥n al bot√≥n clickeado
            const selectedBtn = document.getElementById(`prob-${problem}`);
            selectedBtn.classList.add('selected', 'border-blue-500', 'bg-blue-50');
            selectedBtn.classList.remove('border-gray-200');
        }

        function generateMessage() {
            const problemData = contentDatabase[selectedProblem];
            const template = messageTemplates[messageType][Math.floor(Math.random() * messageTemplates[messageType].length)];
           
            // Seleccionar problemas y tratamientos aleatorios
            const randomProblem = problemData.problems[Math.floor(Math.random() * problemData.problems.length)];
            const randomTreatments = [];
           
            // Seleccionar 3 tratamientos aleatorios
            for (let i = 0; i < 3; i++) {
                const randomIndex = Math.floor(Math.random() * problemData.treatments.length);
                if (!randomTreatments.includes(problemData.treatments[randomIndex])) {
                    randomTreatments.push(problemData.treatments[randomIndex]);
                }
            }
           
            // Reemplazar placeholders
            currentMessage = template
                .replace(/{problem}/g, randomProblem)
                .replace(/{treatments}/g, randomTreatments.join('\n‚Ä¢ '));
           
            // Mostrar mensaje
            document.getElementById('messageContent').textContent = currentMessage;
           
            // Mostrar imagen de anatom√≠a
            const anatomyContainer = document.getElementById('anatomyImageContainer');
            const anatomyImage = document.getElementById('anatomyImage');
           
            anatomyImage.src = anatomyImages[selectedProblem];
            anatomyImage.alt = `Anatom√≠a de ${problemData.name}`;
            anatomyContainer.classList.remove('hidden');
           
            // Generar plantilla visual
            generateVisualTemplate(messageType, selectedProblem);
           
            // Mostrar resultados
            document.getElementById('messageResult').classList.remove('hidden');
           
            // Scroll a resultados
            document.getElementById('messageResult').scrollIntoView({ behavior: 'smooth' });
        }

        function generateVisualTemplate(type, problem) {
            const canvas = document.getElementById('templateCanvas');
            const ctx = canvas.getContext('2d');
           
            // Establecer tama√±o del canvas
            canvas.width = 800;
            canvas.height = 600;
           
            // Limpiar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
           
            // Dibujar fondo
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#4f46e5');
            gradient.addColorStop(1, '#06b6d4');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
           
            // Dibujar contenido
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 32px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Lic. Kenia de los Santos Andujar', canvas.width / 2, 60);
           
            ctx.font = '24px Arial';
            ctx.fillText('Fisioterapeuta Profesional', canvas.width / 2, 100);
           
            // Dibujar icono seg√∫n el problema
            const problemData = contentDatabase[problem];
            ctx.font = 'bold 36px Arial';
            ctx.fillText(problemData.icon, canvas.width / 2, 160);
           
            ctx.font = 'bold 28px Arial';
            ctx.fillText(problemData.name.toUpperCase(), canvas.width / 2, 210);
           
            // Dibujar l√≠nea divisoria
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(canvas.width * 0.1, 240);
            ctx.lineTo(canvas.width * 0.9, 240);
            ctx.stroke();
           
            // Dibujar mensaje seg√∫n tipo
            ctx.font = '20px Arial';
            if (type === 'info') {
                ctx.fillText('¬øSufres de ' + problemData.name + '?', canvas.width / 2, 280);
                ctx.font = '18px Arial';
                ctx.fillText('Te puedo ayudar con tratamientos especializados', canvas.width / 2, 310);
            } else if (type === 'offer') {
                ctx.fillText('¬°OFERTA ESPECIAL!', canvas.width / 2, 280);
                ctx.font = '18px Arial';
                ctx.fillText('Aprovecha nuestros descuentos esta semana', canvas.width / 2, 310);
            } else if (type === 'card') {
                ctx.fillText('Tarjeta de Presentaci√≥n', canvas.width / 2, 280);
                ctx.font = '18px Arial';
                ctx.fillText('Comparte con quien necesite ayuda profesional', canvas.width / 2, 310);
            } else {
                ctx.fillText('Historias de √âxito', canvas.width / 2, 280);
                ctx.font = '18px Arial';
                ctx.fillText('Testimonios reales de pacientes satisfechos', canvas.width / 2, 310);
            }
           
            // Dibujar informaci√≥n de contacto
            ctx.font = 'bold 22px Arial';
            ctx.fillText('üì± WhatsApp: +1 (829) 697-4658', canvas.width / 2, 500);
           
            ctx.font = '18px Arial';
            ctx.fillText('üìç Servicio a domicilio disponible', canvas.width / 2, 540);
           
            // Dibujar peque√±o texto promocional
            ctx.font = '16px Arial';
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.fillText('¬°No dejes que el dolor limite tu vida!', canvas.width / 2, 580);
        }

        function downloadTemplate() {
            const canvas = document.getElementById('templateCanvas');
            const link = document.createElement('a');
            link.download = `fisioterapia-kenia-${messageType}-${selectedProblem}-${Date.now()}.png`;
            link.href = canvas.toDataURL();
            link.click();
        }

        function copyMessage() {
            if (currentMessage) {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(currentMessage).then(() => {
                        alert('‚úÖ Mensaje copiado. Ahora √°brelo en WhatsApp y env√≠alo a tus clientes.');
                    });
                } else {
                    const textArea = document.createElement('textarea');
                    textArea.value = currentMessage;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('‚úÖ Mensaje copiado. Ahora √°brelo en WhatsApp y env√≠alo a tus clientes.');
                }
            }
        }

        function sendToWhatsApp() {
            // Primero copiar el mensaje al portapapeles
            copyMessage();
           
            // Luego abrir WhatsApp
            const whatsappUrl = `whatsapp://send?text=${encodeURIComponent(currentMessage)}`;
            window.location.href = whatsappUrl;
        }

        function generateAnother() {
            generateMessage();
        }

        // Inicializar sistema
        document.addEventListener('DOMContentLoaded', function() {
            // Generar contenido inicial
            setTimeout(() => {
                generateMessage();
            }, 500);
        });
    </script>
</body>
</html> 
